"use strict";(self.webpackChunkpgr=self.webpackChunkpgr||[]).push([[613],{2613:(F,f,r)=>{r.r(f),r.d(f,{LgdModule:()=>w});var c=r(9808),m=r(262),g=r(4004),i=r(1223),v=r(5235),D=r(520);let C=(()=>{class e{constructor(t){this._http=t}get(t){return this._http.get(t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(D.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b=(()=>{class e{constructor(t){this._http=t}getStates(t,s=0,a=10){return this.getStateDetails(t,s,a).pipe((0,g.U)(o=>o.records))}getStateDetails(t,s=0,a=10){let o=`https://api.data.gov.in/resource/${t.api}?api-key=${atob(v.N.apiKey)}&format=json&offset=${s}&limit=${a}`;return("district"===t.type||"subdistrict"===t.type)&&(o+=`&filters[state_census2011_code]=${t.state}`),"subdistrict"===t.type&&(o+=`&filters[district_census2011_code]=${t.district}`),"village"===t.type&&(o+=`&filters[statecode]=${t.state}&filters[districtcode]=${t.district}&filters[subdistrictcode]=${t.subdistrict}`),this._http.get(o)}getColDef(t){const{type:s}=t,a=s.charAt(0).toUpperCase()+s.substr(1).toLowerCase();return[{field:`${s}_census2011_code`,sort:"asc",headerName:`${a} Code`},{field:`${s}_name_english`,headerName:`${a} Name`},...t.colDef]}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(C))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=r(505),y=r(7488),L=r(8242);function $(e,n){1&e&&(i.TgZ(0,"div",3),i._uU(1," Note: Double click to check local directory "),i.qZA())}let d=(()=>{class e{constructor(t,s,a,o){this._lgd=t,this._route=s,this._router=a,this._titleCase=o,this.nav=[{name:"Local Government Directory",link:"",icon:"card-checklist"}],this.apiConfig={api:"",state:"",district:"",subdistrict:"",type:"state",colDef:[]},this.colDef=[],this.total=NaN,this.getRows=l=>{this.rowData$=this._lgd.getStates(this.apiConfig,l.offset,l.limit).pipe((0,m.K)(T=>[]))}}ngOnInit(){this._route.data.subscribe(t=>{this.apiConfig.api=t.api,this.apiConfig.type=t.type||"state",this.apiConfig.colDef=t.colDef||[],this.nav[0].name+=" / "+this._titleCase.transform(this.apiConfig.type)+"s",this.colDef=this._lgd.getColDef(this.apiConfig)}),this._route.params.subscribe(t=>{this.apiConfig.state=t.state,this.apiConfig.district=t.district,this.apiConfig.subdistrict=t.subdistrict})}onGridReady(t){this.rowData$=this._lgd.getStateDetails(this.apiConfig).pipe((0,g.U)(s=>(this.total=s.total,s.records))),t.api.sizeColumnsToFit()}onRowDoubleClicked(t){this._router.navigate(["lgd",t.data.state_census2011_code,t.data.district_census2011_code,t.data.subdistrict_census2011_code].filter(l=>!!l))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(b),i.Y36(u.gz),i.Y36(u.F0),i.Y36(c.rS))},e.\u0275cmp=i.Xpm({type:e,selectors:[["pgr-lgd-list"]],decls:3,vars:6,consts:[[3,"navList"],["class","p-2 text-warning",4,"ngIf"],[1,"ticket-grid",3,"columnDefs","rowData$","getRows","total","onGridReady","onRowDoubleClicked"],[1,"p-2","text-warning"]],template:function(t,s){1&t&&(i.TgZ(0,"lib-breadcrumb",0),i.YNc(1,$,2,0,"div",1),i.qZA(),i.TgZ(2,"lib-grid",2),i.NdJ("onGridReady",function(o){return s.onGridReady(o)})("onRowDoubleClicked",function(o){return s.onRowDoubleClicked(o)}),i.qZA()),2&t&&(i.Q6J("navList",s.nav),i.xp6(1),i.Q6J("ngIf","village"!==s.apiConfig.type),i.xp6(1),i.Q6J("columnDefs",s.colDef)("rowData$",s.rowData$)("getRows",s.getRows)("total",s.total))},directives:[y.L,c.O5,L.M],styles:[".ticket-grid[_ngcontent-%COMP%]{height:calc(100% - 2.5rem - 1px);display:block}"]}),e})();var S=r(9835),N=r(5550);const h={field:"district_name_english",headerName:"District name"},p={field:"state_name_english",headerName:"State name"},R=[{path:"",component:d,data:{api:"a71e60f0-a21d-43de-a6c5-fa5d21600cdb"}},{path:":state",component:d,data:{api:"37231365-78ba-44d5-ac22-3deec40b9197",type:"district",colDef:[p]}},{path:":state/:district",component:d,data:{api:"6be51a29-876a-403a-a6da-42fde795e751",type:"subdistrict",colDef:[h,p]}},{path:":state/:district/:subdistrict",component:d,data:{api:"f17a1608-5f10-4610-bb50-a63c80d83974",type:"village",colDef:[{field:"subdistrict_name_english",headerName:"Sub-District name"},h,p]}}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[c.rS],imports:[[c.ez,u.Bz.forChild(R),S.z,N.n]]}),e})()}}]);